{% extends 'logistica/index.html' %}

{% block title.content %}{{ titulo }} - {{ block.super }}{% endblock title.content %}
{% block header.content %}{{ titulo }} - <a href="{% url 'logistica:index' %}">{{ block.super }}</a>{% endblock header.content %}

{% block stylesheet %}
<style>
{% include 'layout/simple_table.css' %}
</style>
{% endblock %}

{% block content %}
<form action="{% url 'logistica:notafiscal_rel' %}" method="post">
    {{ form.as_p }}
    <input type="submit" value="Busca"/>
    {% csrf_token %}
</form>
{% if request.POST %}
  <h3>Filtro:</h3>
  <ul>
    {% if listadas == 'V' %}
      <li>Apenas notas fiscais de venda e ativas (não canceladas)</li>
    {% endif %}
    {% if entregue %}
      {% if entregue == 'V' %}
        <li>Entregue: Sim</li>
      {% else %}
        <li>Entregue: Não</li>
      {% endif %}
    {% endif %}
    {% if data_de or data_ate %}
      {% if data_de == data_ate %}
        <li>Data de Faturamento igual a {{ data_de }}</li>
      {% else %}
        {% if data_de %}
          <li>Data de Faturamento de {{ data_de }}</li>
        {% endif %}
        {% if data_ate %}
          <li>Data de Faturamento até {{ data_ate }}</li>
        {% endif %}
        {% if data_saida %}
          <li>Filtra por data de saída? {{ data_saida }}</li>
        {% endif %}
      {% endif %}
    {% endif %}
    {% if uf %}
      <li>UF: {{ uf }}</li>
    {% endif %}
    {% if nf %}
      <li>NF: {{ nf }}</li>
    {% endif %}
    {% if cliente %}
      <li>Cliente: {{ cliente }}</li>
    {% endif %}
    {% if transportadora %}
      <li>Transportadora: {{ transportadora }}</li>
    {% endif %}
  </ul>
{% endif %}
{% if msg_erro %}
  <h3>{{ msg_erro }}</h3>
{% endif %}
{% if data %}
  <h3>Notas Fiscais de venda</h3>
  <table>
    {% include "layout/thead_generic.html" with data=headers only %}
    {% include "layout/tbody_generic.html" with fields=fields data=data only %}
  </table>
{% endif %}
{% endblock %}
