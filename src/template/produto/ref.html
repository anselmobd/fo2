{% extends 'produto/index.html' %}

{% block title.content %}{{ titulo }} - {{ block.super }}{% endblock title.content %}
{% block header.content %}{{ titulo }} - <a href="/produto/">{{ block.super }}</a>{% endblock header.content %}

{% block stylesheet %}
<style>
{% include 'layout/simple_table.css' %}
</style>
{% endblock %}

{% block content %}
<form action="/produto/ref/" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Busca"/>
</form>
{% if ref %}
  <h2>Referência: {{ ref }}&nbsp;&nbsp;&nbsp;Tipo: {{ tipo }}</h2>
{% endif %}
{% if modelo %}
  <h3>Modelo: {{ modelo|safe }}</h3>
{% endif %}
{% if msg_erro %}
  <h3>{{ msg_erro }}</h3>
{% endif %}
{% if data %}
  <h3>Informações básicas</h3>
  <table>
    {% include "layout/html_thead.html" with data=headers only %}
    {% include "layout/html_tbody.html" with fields=fields data=data only %}
  </table>
  <table>
    {% include "layout/html_thead.html" with data=headers2 only %}
    {% include "layout/html_tbody.html" with fields=fields2 data=data2 only %}
  </table>
  <table>
    <tr>
      <td>
        {% if c_data %}
          <h3>Cores</h3>
          <table>
            {% include "layout/html_thead.html" with data=c_headers only %}
            {% include "layout/html_tbody.html" with fields=c_fields data=c_data only %}
          </table>
        {% endif %}
      </td>
      <td></td>
      <td style="border-left: thin solid lightgrey;"></td>
      <td>
        {% if t_data %}
          <h3>Tamanhos</h3>
          <table>
            {% include "layout/html_thead.html" with data=t_headers only %}
            {% include "layout/html_tbody.html" with fields=t_fields data=t_data only %}
          </table>
        {% endif %}
      </td>
    </tr>
  </table>
  <table>
    <tr>
      {% if pa_data %}
      <td>
        <h3>Utilizado em</h3>
        <table>
          {% include "layout/html_thead.html" with data=pa_headers only %}
          {% include "layout/html_tbody_link.html" with fields=pa_fields data=pa_data link=pa_link only %}
        </table>
      </td>
      <td></td>
      <td style="border-left: thin solid lightgrey;"></td>
      {% else %}
        {% if tipo != 'PA' %}
        <td>
          <h3>Utilizado em</h3>
          <h4>Sem utilização!</h4>
        </td>
        <td></td>
        <td style="border-left: thin solid lightgrey;"></td>
        {% endif %}
      {% endif %}
      <td>
        <h3>Estruturas</h3>
        {% if e_data %}
          <table>
            {% include "layout/html_thead.html" with data=e_headers only %}
            {% include "layout/html_tbody_link.html" with fields=e_fields data=e_data link=e_link only %}
          </table>
        {% else %}
          <h4>Sem estruturas!</h4>
        {% endif %}
        </td>
        <td></td>
        <td style="border-left: thin solid lightgrey;"></td>
        <td>
        <h3>Roteiros</h3>
        {% if r_data %}
          <table>
            {% include "layout/html_thead.html" with data=r_headers only %}
            {% include "layout/html_tbody.html" with fields=r_fields data=r_data only %}
          </table>
        {% else %}
          <h4>Sem roteiros!</h4>
        {% endif %}
      </td>
    </tr>
  </table>
  {% if roteiros %}
    <h3>Detalhando Roteiros</h3>
    {% for roteiro in roteiros %}
    <h4>Alternativa "{{ roteiro.alternativa }}" / Roteiro "{{ roteiro.roteiro }}"</h4>
    <table>
      {% include "layout/html_thead.html" with data=roteiro.r_headers only %}
      {% include "layout/html_tbody.html" with fields=roteiro.r_fields data=roteiro.r_data only %}
    </table>
    {% endfor %}
  {% endif %}
  {% if estruts %}
    <h3>Detalhando Estruturas Que Tem Roteiro</h3>
    {% for estr in estruts %}
    <h4>Alternativa "{{ estr.alt }}"</h4>
    <table>
      {% include "layout/html_thead.html" with data=estr.e_headers only %}
      {% include "layout/html_tbody_link.html" with fields=estr.e_fields data=estr.e_data link=e_link only %}
    </table>
    {% endfor %}
  {% endif %}
{% endif %}
{% endblock %}
